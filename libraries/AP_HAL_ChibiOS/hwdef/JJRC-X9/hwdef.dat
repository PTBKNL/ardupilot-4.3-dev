# hw definition file for processing by chibios_pins.py
# JJRC X9

# MCU class and specific type
MCU STM32F4xx STM32F405xx

# board ID for firmware load
APJ_BOARD_ID 11

# crystal frequency
OSCILLATOR_HZ 24000000
#STM32_PLLM_VALUE 8

define STM32_ST_USE_TIMER 5
define CH_CFG_ST_RESOLUTION 32

FLASH_SIZE_KB 1024

# board voltage
STM32_VDD 330U

UART_ORDER OTG1 USART6

PA11 OTG_FS_DM OTG1
PA12 OTG_FS_DP OTG1

PA3 BATT_VOLTAGE_SENS ADC1 SCALE(1)

PC6 USART6_TX USART6
PC7 USART6_RX USART6

PB13 SPI2_SCK SPI2
PB14 SPI2_MISO SPI2
PB15 SPI2_MOSI SPI2

PB8 I2C1_SCL I2C1
PB9 I2C1_SDA I2C1

# I2C2 on PB10, PB11 is a guess, maybe for LEDs ?
# these pins go on ribbon to PDB
PB10 I2C2_SCL I2C2
PB11 I2C2_SDA I2C2

I2C_ORDER I2C1 I2C2

PC4 BARO_CS CS
PC5 IMU_CS CS
PA8 FRAM_CS CS

SPIDEV icm20689 SPI2 DEVID1 IMU_CS  MODE3 1*MHZ 8*MHZ
SPIDEV dps280   SPI2 DEVID2 BARO_CS MODE3 1*MHZ 8*MHZ
SPIDEV ramtron  SPI2 DEVID3 FRAM_CS MODE3 8*MHZ 8*MHZ

BARO DPS280 SPI:dps280
IMU Invensense SPI:icm20689 ROTATION_YAW_90
COMPASS IST8310 I2C:0:0x0e false ROTATION_ROLL_180_YAW_90

# Enable SST25VF010A serial storage
define HAL_STORAGE_SIZE 16384
define HAL_WITH_RAMTRON 1

# PWM control of motors (not confirmed)
# they do go to PDB/ESC board on ribbon
PA6 TIM3_CH1 TIM3 PWM(1) GPIO(50)
PA7 TIM3_CH2 TIM3 PWM(2) GPIO(51)
PB0 TIM3_CH3 TIM3 PWM(3) GPIO(52)
PB1 TIM3_CH4 TIM3 PWM(4) GPIO(53)

PA0 DEBUG_A0 OUTPUT HIGH
PA1 DEBUG_A1 OUTPUT HIGH
PA2 DEBUG_A2 OUTPUT HIGH
#PA3 DEBUG_A3 OUTPUT HIGH
PA4 DEBUG_A4 OUTPUT HIGH
PA5 DEBUG_A5 OUTPUT HIGH
# PA6 DEBUG_A6 OUTPUT HIGH
# PA7 DEBUG_A7 OUTPUT HIGH
PA9 DEBUG_A9 OUTPUT HIGH
PA10 DEBUG_A10 OUTPUT HIGH
PA13 DEBUG_A13 OUTPUT HIGH
PA14 DEBUG_A14 OUTPUT HIGH
PA15 DEBUG_A15 OUTPUT HIGH

# PB0 DEBUG_B0 OUTPUT HIGH
# PB1 DEBUG_B1 OUTPUT HIGH
PB2 DEBUG_B2 OUTPUT HIGH

PB3 DEBUG_B3 OUTPUT HIGH
PB4 DEBUG_B4 OUTPUT HIGH
PB5 DEBUG_B5 OUTPUT HIGH
PB6 DEBUG_B6 OUTPUT HIGH
PB7 DEBUG_B7 OUTPUT HIGH
#PB10 DEBUG_B10 OUTPUT HIGH
#PB11 DEBUG_B11 OUTPUT HIGH
PB12 DEBUG_B12 OUTPUT HIGH

PC0 DEBUG_C0 OUTPUT HIGH
PC1 DEBUG_C1 OUTPUT HIGH
PC2 DEBUG_C2 OUTPUT HIGH
PC3 DEBUG_C3 OUTPUT HIGH
PC8 DEBUG_C8 OUTPUT HIGH
PC9 DEBUG_C9 OUTPUT HIGH
PC10 DEBUG_C10 OUTPUT HIGH
PC11 DEBUG_C11 OUTPUT HIGH
PC12 DEBUG_C12 OUTPUT HIGH
PC13 DEBUG_C13 OUTPUT HIGH
PC14 DEBUG_C14 OUTPUT HIGH
PC15 DEBUG_C15 OUTPUT HIGH

PD2 DEBUG_D2 OUTPUT HIGH
PH0 DEBUG_PH0 OUTPUT HIGH
PH1 DEBUG_PH1 OUTPUT HIGH

